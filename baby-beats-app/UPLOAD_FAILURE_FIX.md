# ğŸ”§ EAS ä¸Šä¼ å¤±è´¥è§£å†³æ–¹æ¡ˆ

## é”™è¯¯ï¼šsocket hang up

### é”™è¯¯ä¿¡æ¯
```
âœ– Uploading to EAS Build (9.4 MB / 9.4 MB)
Failed to upload the project tarball to EAS Build
Reason: socket hang up
```

### åŸå› 
ç½‘ç»œè¿æ¥åœ¨ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ° Google Cloud Storage æ—¶ä¸­æ–­ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### æ–¹æ¡ˆ 1ï¼šç›´æ¥é‡è¯• â­â­â­

æœ€ç®€å•æœ‰æ•ˆçš„æ–¹æ³•ï¼š

```bash
# ç­‰å¾… 1-2 åˆ†é’Ÿåé‡è¯•
eas build --platform ios --profile production
```

**æˆåŠŸç‡**: 80%+  
**è€—æ—¶**: ç«‹å³

---

### æ–¹æ¡ˆ 2ï¼šåˆ‡æ¢ç½‘ç»œç¯å¢ƒ â­â­

å¦‚æœå¤šæ¬¡é‡è¯•éƒ½å¤±è´¥ï¼š

```bash
# é€‰é¡¹ A: åˆ‡æ¢åˆ°æ›´ç¨³å®šçš„ç½‘ç»œ
# - ä½¿ç”¨æœ‰çº¿ç½‘ç»œè€Œé WiFi
# - åˆ‡æ¢åˆ°æ‰‹æœºçƒ­ç‚¹
# - ä½¿ç”¨å…¶ä»– WiFi

# é€‰é¡¹ B: æ›´æ¢æ—¶é—´æ®µ
# - é¿å¼€ç½‘ç»œé«˜å³°æœŸ
# - å°è¯•å‡Œæ™¨æˆ–æ¸…æ™¨æ„å»º

# ç„¶åé‡è¯•
eas build --platform ios --profile production
```

**æˆåŠŸç‡**: 90%+  
**è€—æ—¶**: 5-10 åˆ†é’Ÿå‡†å¤‡

---

### æ–¹æ¡ˆ 3ï¼šä¼˜åŒ–é¡¹ç›®å¤§å° â­

å‡å°‘ä¸Šä¼ æ–‡ä»¶å¤§å°ï¼Œæé«˜æˆåŠŸç‡ï¼š

```bash
cd baby-beats-app

# 1. æ¸…ç†ç¼“å­˜å’Œæ„å»ºäº§ç‰©
rm -rf node_modules/.cache
rm -rf .expo
rm -rf ios/build
rm -rf android/build
rm -rf *.log

# 2. æ£€æŸ¥é¡¹ç›®å¤§å°
du -sh .
# åº”è¯¥åœ¨ 5-15 MB å·¦å³

# 3. ä½¿ç”¨ .easignore æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶
# å·²åˆ›å»º .easignore æ–‡ä»¶

# 4. é‡æ–°æ„å»º
eas build --platform ios --profile production
```

**æˆåŠŸç‡**: 95%  
**è€—æ—¶**: 5 åˆ†é’Ÿ

---

### æ–¹æ¡ˆ 4ï¼šå¢åŠ ç½‘ç»œè¶…æ—¶é…ç½® â­

ä¿®æ”¹ npm é…ç½®ä»¥å¢åŠ è¶…æ—¶æ—¶é—´ï¼š

```bash
# ä¸´æ—¶è®¾ç½®ï¼ˆå½“å‰ä¼šè¯ï¼‰
export NODE_OPTIONS="--max-http-header-size=80000"

# æˆ–æ›´æ–° .npmrcï¼ˆå·²é…ç½®ï¼‰
cat .npmrc
# fetch-retries=5
# fetch-retry-mintimeout=20000
# fetch-retry-maxtimeout=120000

# é‡è¯•æ„å»º
eas build --platform ios --profile production
```

**æˆåŠŸç‡**: 85%  
**è€—æ—¶**: 1 åˆ†é’Ÿ

---

### æ–¹æ¡ˆ 5ï¼šæœ¬åœ°æ„å»ºï¼ˆå¦‚æœæœ‰ Macï¼‰ â­â­

å®Œå…¨é¿å¼€ç½‘ç»œé—®é¢˜ï¼š

```bash
# éœ€è¦ Mac ç”µè„‘å’Œ Xcode

# 1. å®‰è£…ä¾èµ–
brew install fastlane

# 2. æœ¬åœ°æ„å»º
eas build --platform ios --profile production --local

# æˆ–ä½¿ç”¨ Expo åŸç”Ÿå‘½ä»¤
npx expo run:ios --configuration Release
```

**æˆåŠŸç‡**: 100%ï¼ˆæ— ç½‘ç»œä¾èµ–ï¼‰  
**è€—æ—¶**: éœ€è¦ Mac å’Œ Xcode

---

## ğŸ” è°ƒè¯•æ­¥éª¤

### 1. æ£€æŸ¥ç½‘ç»œè¿æ¥

```bash
# æµ‹è¯•ç½‘ç»œé€Ÿåº¦
curl -o /dev/null https://storage.googleapis.com/ -w "Speed: %{speed_download} bytes/sec\n"

# æµ‹è¯•åˆ° Google Cloud çš„è¿æ¥
ping -c 5 storage.googleapis.com

# æµ‹è¯• DNS è§£æ
nslookup storage.googleapis.com
```

### 2. æ£€æŸ¥é¡¹ç›®æ–‡ä»¶

```bash
# æŸ¥çœ‹å°†è¦ä¸Šä¼ çš„å†…å®¹
cd baby-beats-app
find . -type f | wc -l  # æ–‡ä»¶æ•°é‡
du -sh .                # æ€»å¤§å°

# æŸ¥æ‰¾å¤§æ–‡ä»¶ï¼ˆ>1MBï¼‰
find . -type f -size +1M -exec ls -lh {} \;
```

### 3. éªŒè¯é…ç½®

```bash
# æ£€æŸ¥ EAS é…ç½®
cat eas.json

# æ£€æŸ¥ ignore æ–‡ä»¶
cat .gitignore
cat .easignore
```

---

## ğŸ“Š ç½‘ç»œè¦æ±‚

### EAS Build ç½‘ç»œéœ€æ±‚

| æŒ‡æ ‡ | æœ€ä½è¦æ±‚ | æ¨è |
|------|----------|------|
| ä¸Šä¼ é€Ÿåº¦ | 1 Mbps | 5+ Mbps |
| ç¨³å®šæ€§ | è¿ç»­ 5 åˆ†é’Ÿ | è¿ç»­ 10 åˆ†é’Ÿ |
| å»¶è¿Ÿ | <500ms | <200ms |

### æµ‹è¯•æ‚¨çš„ç½‘ç»œ

```bash
# ä¸Šä¼ é€Ÿåº¦æµ‹è¯•
# è®¿é—® https://www.speedtest.net/
# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·
brew install speedtest-cli
speedtest-cli
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### æ„å»ºå‰æ£€æŸ¥æ¸…å•

- [ ] ç½‘ç»œè¿æ¥ç¨³å®šï¼ˆWiFi æˆ–æœ‰çº¿ï¼‰
- [ ] æ¸…ç†äº†ç¼“å­˜å’Œæ„å»ºäº§ç‰©
- [ ] é¡¹ç›®å¤§å°åˆç†ï¼ˆ<20MBï¼‰
- [ ] æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„å¤§æ–‡ä»¶ä¸‹è½½
- [ ] é€‰æ‹©ç½‘ç»œè¾ƒå¥½çš„æ—¶é—´æ®µ

### æ¨èçš„æ„å»ºæ—¶é—´

**æœ€ä½³æ—¶é—´æ®µ**ï¼š
- ğŸŒ… æ—©ä¸Š 6:00-9:00
- ğŸŒ™ æ™šä¸Š 23:00-å‡Œæ™¨ 2:00

**é¿å¼€é«˜å³°**ï¼š
- âŒ ä¸­åˆ 12:00-14:00
- âŒ æ™šä¸Š 19:00-22:00

---

## ğŸ“ å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹ 1ï¼šé¦–æ¬¡ä¸Šä¼ å¤±è´¥

```
é—®é¢˜ï¼šä¸Šä¼ åˆ° 9.4MB æ—¶ socket hang up
è§£å†³ï¼šç­‰å¾… 2 åˆ†é’Ÿåé‡è¯•
ç»“æœï¼šâœ… æˆåŠŸ
```

### æ¡ˆä¾‹ 2ï¼šå¤šæ¬¡å¤±è´¥

```
é—®é¢˜ï¼šè¿ç»­ 3 æ¬¡ä¸Šä¼ å¤±è´¥
è§£å†³ï¼šåˆ‡æ¢åˆ°æ‰‹æœºçƒ­ç‚¹
ç»“æœï¼šâœ… æˆåŠŸ
```

### æ¡ˆä¾‹ 3ï¼šæ¸…ç†åæˆåŠŸ

```
é—®é¢˜ï¼šé¡¹ç›® 25MBï¼Œä¸Šä¼ å¾ˆæ…¢
è§£å†³ï¼šæ¸…ç† node_modules/.cacheï¼Œå‡å°åˆ° 8MB
ç»“æœï¼šâœ… å¿«é€ŸæˆåŠŸ
```

---

## ğŸ†˜ å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥

### è”ç³» EAS æ”¯æŒ

```
1. è®¿é—®ï¼šhttps://expo.dev/contact
2. æä¾›ä¿¡æ¯ï¼š
   - æ„å»º IDï¼ˆå¦‚æœ‰ï¼‰
   - é”™è¯¯æ—¥å¿—
   - ç½‘ç»œæµ‹è¯•ç»“æœ
   - é¡¹ç›®å¤§å°
```

### å¤‡é€‰æ–¹æ¡ˆ

```bash
# ä½¿ç”¨ Expo Application Services æ›¿ä»£æ–¹æ¡ˆ
# 1. æœ¬åœ°æ„å»ºï¼ˆéœ€è¦ Macï¼‰
# 2. ä½¿ç”¨ CI/CDï¼ˆGitHub Actionsï¼‰
# 3. ä½¿ç”¨å…¶ä»–æ„å»ºæœåŠ¡
```

---

## âœ… å¿«é€Ÿå‚è€ƒ

### æœ€å¿«çš„è§£å†³æ–¹æ³•ï¼ˆ5 åˆ†é’Ÿå†…ï¼‰

```bash
# 1. æ¸…ç†é¡¹ç›®
cd baby-beats-app
rm -rf node_modules/.cache .expo ios/build android/build

# 2. ç­‰å¾… 1-2 åˆ†é’Ÿ

# 3. é‡è¯•
eas build --platform ios --profile production

# 4. å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œåˆ‡æ¢ç½‘ç»œåé‡è¯•
```

### å‘½ä»¤é€ŸæŸ¥

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| é‡è¯•æ„å»º | `eas build --platform ios --profile production` |
| æŸ¥çœ‹æ„å»º | `eas build:list` |
| å–æ¶ˆæ„å»º | `eas build:cancel` |
| æ£€æŸ¥é¡¹ç›®å¤§å° | `du -sh .` |
| æ¸…ç†ç¼“å­˜ | `rm -rf node_modules/.cache .expo` |

---

## æ€»ç»“

**å½“å‰é—®é¢˜**: ä¸Šä¼ ä¸­æ–­ï¼ˆsocket hang upï¼‰  
**æœ€å¯èƒ½åŸå› **: ç½‘ç»œä¸ç¨³å®š  
**æœ€å¿«è§£å†³æ–¹æ¡ˆ**: ç›´æ¥é‡è¯•  
**æˆåŠŸç‡**: 80%+

**ç«‹å³æ‰§è¡Œ**ï¼š
```bash
eas build --platform ios --profile production
```

å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œç­‰å¾… 5-10 åˆ†é’Ÿæˆ–åˆ‡æ¢ç½‘ç»œåå†è¯•ï¼ğŸ’ª



# 宝宝成长记录 App 需求设计文档（V1.0）

---

## 1. 项目概述

### 1.1 产品背景与目标

新手父母日常需要频繁记录宝宝的喂养、排泄、睡眠、成长以及看病用药、疫苗等信息，且往往由多位家庭成员共同照顾宝宝。手工记录（纸笔、备忘录、微信聊天）容易丢失、混乱、不成体系，不利于长期观察宝宝的健康与作息规律。

本项目计划基于 **Expo + React Native** 开发一款多平台（iOS / Android）宝宝管理应用，支持多宝宝管理，提供结构化记录与统计分析，满足以下目标：

- **方便记录：** 喝奶、尿布、睡眠、妈妈挤奶等高频事件一键记录。
- **健康追踪：** 自动生成图表与曲线，直观观察成长与健康趋势。
- **多宝宝与多设备共享：** 支持多宝宝档案和多设备同步记录。
- **老人可用：** 大字体、夜间模式、简单清晰的交互，家中老人也能轻松使用。
- **数据安心：** 支持 iCloud 备份、导出、导入，保障数据安全与可迁移。

---

### 1.2 产品名称（暂定）

- 中文名：**宝宝成长记录助手**
- 英文名：**Baby Beats**

> 名称可后续由产品/市场进一步确定及统一。

---

### 1.3 平台与技术栈

- 客户端平台：iOS / Android
- 开发框架：**Expo + React Native**
- 本地存储：
  - 优先考虑：SQLite（通过 RN 插件）或 MMKV 方案
- 云端同步：
  - 自建后端（REST/GraphQL）或 BaaS（如 Supabase/Firebase，自行选型）
  - HTTPS 加密传输
- iCloud 备份：
  - iOS 使用 iCloud 文件 / Document 目录备份数据库或导出文件

---

## 2. 用户与使用场景

### 2.1 用户角色

1. **父母（爸爸 / 妈妈，主要记录者）**
   - 记录喝奶、睡眠、尿布、挤奶等高频信息。
   - 查看宝宝当天概览及长期趋势。
   - 管理多个宝宝档案。

2. **老人（爷爷奶奶 / 外公外婆）**
   - 白天主要照看宝宝。
   - 需要操作简单、文字大、提示清晰的记录功能。
   - 通常只关注吃、拉、睡等基础信息。

3. **其他家庭成员**
   - 偶尔协助记录。
   - 主要用于查看宝宝状态、成长数据、里程碑等。

---

### 2.2 典型使用场景

- **半夜喂奶：** 妈妈/爸爸起夜，用单手快速记录一条“喝奶”记录，睡前看一眼宝宝一晚上的吃奶情况。
- **白天照看：** 老人按次记录尿布、睡眠，晚上父母查看当日数据总结。
- **看医生：** 就诊时打开“看病记录 + 体温/用药记录”，快速向医生说明近期情况。
- **打疫苗：** 记录每次疫苗接种时间、疫苗名称、批号、下次接种时间，并收到提醒。
- **成长检查：** 每月记录身高、体重、头围，自动计算 BMI，观察曲线变化。
- **多宝宝家庭：** 家中有大宝、小宝，通过切换宝宝快速查看各自记录。

---

## 3. 功能需求

> 本章为功能需求主体，按模块拆分。

---

### 3.1 账号与多设备同步

#### 3.1.1 注册 / 登录

- 使用 **邮箱 + 密码** 进行账号注册与登录。
- 功能点：
  - 注册：输入邮箱、密码、确认密码。
  - 登录：邮箱 + 密码。
  - 忘记密码：通过注册邮箱收取重置链接/验证码。
- 安全：
  - 服务端加密存储密码（如 bcrypt）。
  - 全部 API 请求通过 HTTPS。

#### 3.1.2 多设备同步

- 同一账号可在多个设备上登录。
- 数据同步策略：
  - 首次登录：全量同步该账号下所有数据（多宝宝档案及所有记录）。
  - 后续同步：按时间戳或版本号进行增量同步。
- 冲突处理（简单策略）：
  - 以更新时间 `updatedAt` 为准，取最新版本。
  - 记录级别冲突较少，可用“最后修改覆盖”的策略。

#### 3.1.3 iCloud 备份（iOS）

- 备份内容：
  - 本地数据库（所有宝宝数据、设置等）。
- 方式：
  - 手动备份：用户在设置中点击“立即备份到 iCloud”。
  - 自动备份（可选 V1/V2）：每天一次，或每 X 次变更后触发。
- 恢复：
  - 在新设备安装后，用户可选择从 iCloud 备份中恢复数据（需设计防止覆盖当前已有数据的提示）。

---

### 3.2 多宝宝管理

#### 3.2.1 多宝宝原则

- 一个账号可创建 **多个宝宝档案**。
- 所有业务记录（喝奶、尿布、睡眠、挤奶、成长、看病、用药、疫苗等）都必须关联到某个宝宝（`babyId`）。
- 应用内展示和统计均基于“当前宝宝”上下文。

#### 3.2.2 宝宝列表与管理页面

- 入口：
  - 「我的 / 设置」 -> 「宝宝管理」
  - 全局顶部宝宝名字区域 -> “管理宝宝”按钮
- 宝宝列表内容：
  - 头像（或颜色图标）
  - 昵称/姓名
  - 性别（图标或文字）
  - 年龄（如“1岁2个月3天”）
  - 当前宝宝标记（如小圆点/标签）
- 可进行操作：
  - 设为当前宝宝
  - 编辑宝宝信息
  - 归档宝宝
  - 删除宝宝（高风险操作）

#### 3.2.3 新增/编辑宝宝信息

字段：

- 昵称/姓名（必填）
- 性别（男 / 女 / 不填）
- 生日（必填）
- 预产期（选填）
- 血型（选填）
- 出生身高、体重、头围（选填）
- 头像（内置图标或颜色）
- 是否归档（内部字段）

交互：

- 第一次进入 App 时若没有宝宝，跳转到“创建宝宝”引导页。
- 新增宝宝后询问是否立即切换为当前宝宝。

#### 3.2.4 当前宝宝选择器

- 展示位置：
  - 首页（Today）、记录（Log）、统计（Stats）、成长（Growth）页面顶部统一位置。
- 形式示例：
  - 顶部显示：`[当前宝宝昵称 ⌄]`，点击弹出宝宝选择列表。
- 切换行为：
  - 切换后当前页面自动刷新为新宝宝的数据。
  - 若正在录入数据，可提示切换会影响当前页面的宝宝对象，避免误操作。

#### 3.2.5 宝宝归档与删除

- **归档宝宝：**
  - 归档后：
    - 不再出现在默认的宝宝选择器列表中（可选“显示归档宝宝”）。
    - 数据保留，可导出。
  - 使用场景：宝宝长大后不再记录，但想保留历史。
  - 归档前需弹窗提示，说明不影响历史数据。

- **删除宝宝：**
  - 删除该宝宝及其所有关联数据（不可恢复）。
  - 使用场景：测试数据、误创建等。
  - 删除前双重确认：
    - 文本提示 + 确认按钮。
    - 输入宝宝昵称以确认（可选）。

#### 3.2.6 多宝宝与设置关系

- 全局设置（账号级）：
  - 语言、主题、字体大小、夜间模式、计量单位、备份设置等。
- 可按宝宝差异化的配置（可选 V1/V2）：
  - 首页默认显示卡片（模块显隐、排序）。
  - 某些统计默认时间范围。

---

### 3.3 日常记录模块（核心）

> 所有记录都带 `babyId` 字段，表示记录属于哪个宝宝。

#### 3.3.1 喝奶记录（喂养）

- 类型：
  - 亲喂母乳（直接哺乳，记录时长）
  - 瓶喂母乳（瓶装母乳，记录奶量）
  - 配方奶（奶粉，记录奶量和品牌）
- 字段：
  - 时间（默认当前时间，可修改）
  - 类型（亲喂母乳/瓶喂母乳/配方奶）
  - 亲喂母乳：
    - 左侧时长（分钟）- 支持实时计时
    - 右侧时长（分钟）- 支持实时计时
  - 瓶喂母乳：
    - 奶量（ml / oz，根据设置）
  - 配方奶：
    - 奶量（ml / oz，根据设置）
    - 品牌（选填）
  - 备注（如"吐奶""喝得很急"等）
- 交互：
  - 亲喂母乳：支持"开始左侧"/"结束左侧"、"开始右侧"/"结束右侧"计时操作。
  - 瓶喂母乳/配方奶：直接输入奶量和记录时间。
  - 可快速复制上一条记录（加快重复录入）。

#### 3.3.2 尿布记录（大便/小便）

- 字段：
  - 时间
  - 类型：大便 / 小便 / 大小便都有
  - 大便：
    - 性质：稀 / 正常 / 干硬 / 其他
    - 颜色：黄色 / 绿色 / 深色 / 其他
    - 量级：少 / 中 / 多
  - 小便：
    - 量级：少 / 中 / 多
  - 是否异常：如有血丝、黏液等（勾选 + 描述）
  - 备注
- 展示：
  - 今日尿布次数统计（分大便、小便）
  - 时间轴形式展示。

#### 3.3.3 睡眠记录

- 字段：
  - 开始时间（必填，可选择时间）
  - 结束时间（必填，可选择时间）
  - 时长（自动计算，根据开始和结束时间）
  - 类型：白天小睡 / 夜间睡眠
  - 入睡方式（抱睡 / 奶睡 / 哄睡 / 自己睡 等，可选）
  - 备注（如"多次惊醒""哭闹"）
- 交互：
  - 直接填写睡眠开始和结束时间，系统自动计算时长。
  - 支持编辑历史记录。
  - 时间选择器支持快速选择（如"30分钟前"、"1小时前"等）。

#### 3.3.4 妈妈挤奶记录

- 字段：
  - 时间
  - 挤奶方式：电动 / 手动 / 其他
  - 左侧奶量（ml/oz）
  - 右侧奶量（ml/oz）
  - 总量（自动计算）
  - 存放方式：冷藏 / 冷冻 / 立即喂 / 其他
  - 备注（如“堵奶”“有疼痛感”等）
- 用途：
  - 统计每日总泌乳量。
  - 为后续喂养安排提供参考（冷藏奶库存统计可作为 V2 功能）。

---

### 3.4 成长记录模块

#### 3.4.1 成长数据记录（身高 / 体重 / 头围 / BMI / 体温）

- 字段：
  - 日期时间（默认当天，可修改）
  - 身高（cm/inch）
  - 体重（kg/lb）
  - 头围（cm/inch）
  - 体温（℃/℉）
  - BMI（运行时计算：体重(kg) / 身高(m)^2）
  - 备注（测量环境、是否穿衣服、是否生病等）
- 功能：
  - 以列表形式展示历次记录。
  - 可按时间排序。
- 图表：
  - 身高曲线图
  - 体重曲线图
  - 头围曲线图
  - BMI 曲线图
  - 体温曲线图（适合疾病期的温度变化观察）

#### 3.4.2 里程碑记录

- 内置常见里程碑：
  - 第一次抬头、翻身、坐、爬、站、走路、叫爸爸/妈妈、自己吃饭等。
- 字段：
  - 时间
  - 里程碑类型（内置标签 + 自定义文本）
  - 标题（如“第一次翻身成功！”）
  - 描述（记录当时的情况）
  - 照片链接（V1 可预留字段，V2 再实现图片上传）
- 展示：
  - 时间轴视图（按时间倒序或正序展示）
  - 可筛选某类里程碑（如只看运动类、语言类）

---

### 3.5 医疗与健康记录

#### 3.5.1 看病记录

- 字段：
  - 就诊时间
  - 医院
  - 科室
  - 医生姓名（选填）
  - 主诉/症状（文本）
  - 诊断结果（文本）
  - 医生建议（文本）
  - 备注（如检查结果简要、需要复查时间等）
- 功能：
  - 列表查看就诊记录，按时间排序。
  - 可与用药记录关联（如在用药记录中引用某次就诊）。

#### 3.5.2 用药记录

- 字段：
  - 用药时间
  - 药品名称
  - 剂量（如 2.5ml、半包）
  - 频次（如“每日3次”）
  - 用药开始日期 / 结束日期（或持续天数）
  - 用药方式（口服 / 外用 / 肛塞等）
  - 是否与某次就诊记录关联（visitId）
  - 备注（是否有不良反应、注意事项）
- 可选功能（V1/V2）：
  - 提醒用药时间（本地通知）。

#### 3.5.3 疫苗记录

- 字段：
  - 疫苗名称（可内置常用疫苗清单 + 自定义）
  - 接种日期
  - 剂次（第几针）
  - 接种地点
  - 批号（选填）
  - 下次接种时间（选填）
  - 是否开启接种提醒
  - 备注（如是否发烧、不适反应等）
- 提醒：
  - 若配置了“下次接种时间 + 提醒开启”，在日期临近时推送本地通知。

---

### 3.6 数据展示与统计

#### 3.6.1 日期视图（宝宝一天概览）

- 按某一天展示该宝宝所有数据的汇总卡片，内容包括：
  - 喝奶：
    - 总次数
    - 总量
    - 简单时间线（大致时间节点）
  - 尿布：
    - 大便次数
    - 小便次数
  - 睡眠：
    - 总睡眠时长
    - 白天睡眠时长
    - 夜间睡眠时长
  - 挤奶：
    - 总泌乳量
  - 健康：
    - 当日体温记录列表
    - 用药记录（按时间）
    - 看病记录（如当天有）
  - 备注：
    - 当日整体备注（由父母记录，例如“今天状态不错，情绪很好”）。
- 交互：
  - 顶部日期选择：今天、左右切换、日期选择器。
  - 每个模块卡片可单独点击跳转到对应的详情/列表/统计页。

#### 3.6.2 图表统计（按类型）

- 时间范围：
  - 最近 7 天
  - 最近 30 天
  - 自定义日期段
- 统计内容示例：
  - 喝奶：
    - 每日总量、次数（柱状图/折线图）
    - 每种类型（母乳/奶粉）比例。
  - 睡眠：
    - 每日总睡眠时长曲线
    - 白天/夜间对比。
  - 尿布：
    - 每日大便/小便次数曲线。
  - 挤奶：
    - 每日总挤奶量折线图。
  - 成长：
    - 身高/体重/头围/BMI/体温随时间变化曲线。

#### 3.6.3 单项统计视图

- 为每一种关键数据提供独立统计页：
  - 如“喝奶统计”、“睡眠统计”、“体温统计”等。
- 内容：
  - 图表（趋势、分布）
  - 汇总数据（平均值、最大/最小、总量）
  - 底部列表显示原始记录（支持跳转编辑）。

---

### 3.7 数据导入与导出

#### 3.7.1 导出

- 导出格式：
  - CSV（优先）或 JSON（供技术用户使用）。
- 导出范围：
  - 选择宝宝（当前宝宝为默认）
  - 选择时间区间
  - 选择数据类型（例如仅导出“喝奶 + 睡眠”，或全选）
- 导出方式：
  - iOS：存到文件应用 / AirDrop / 邮件共享。
  - Android：保存到本地路径 + 系统分享。

#### 3.7.2 导入（可作为 V1.1/V2 功能）

- 支持从 CSV 或 JSON 导入历史数据。
- 导入前提示：
  - 格式说明（建议在 App 内提供模板下载）。
  - 导入数据会以追加方式写入，不覆盖已有记录。
- 简单冲突策略：
  - 若导入文件中带有 ID，可按时间或自定义策略处理。
  - V1 可不处理冲突，仅作为“导入额外历史数据”。

---

### 3.8 设置中心（个性化与通用配置）

#### 3.8.1 字体大小

- 选项：
  - 小 / 中 / 大
- 影响范围：
  - 列表文字、按钮文字、表单文字等。
- 要求：
  - 大字体模式下仍保证布局可用，不严重重叠、截断。

#### 3.8.2 主题颜色与夜间模式

- 主题：
  - 预设多套主题色（如蓝、粉、绿、紫等）。
- 夜间模式：
  - 跟随系统 / 始终开启 / 始终关闭。
- 影响范围：
  - 页面背景色、文字颜色、卡片及图表配色等。

#### 3.8.3 首页卡片定制

- 设置项中提供：
  - 勾选要显示的卡片模块（如“显示喝奶概览卡片”、“显示挤奶卡片”等）。
  - 调整卡片顺序（上移/下移，或拖拽排序）。
- 实现：
  - 配置结构可存储为数组，如：`['feeding', 'sleep', 'diaper', ...]`。

#### 3.8.4 计量单位设置

- 选项：
  - 体重：kg / lb
  - 身高：cm / inch
  - 体温：℃ / ℉
  - 体积：ml / oz
- 行为：
  - 输入时使用对应单位。
  - 展示历史记录时按当前设置动态换算（原始数据以统一单位存储）。

#### 3.8.5 语言设置

- 语言：
  - 简体中文（zh-CN）
  - 英文（en-US）
- 模式：
  - 跟随系统 / 手动选择。
- 技术：
  - 使用 i18n 库集中管理文案字符串。

#### 3.8.6 通知与提醒（如在 V1 实现）

- 提醒类型：
  - 喝奶间隔提醒（比如每 2~3 小时一提醒，可灵活配置）。
  - 用药时间提醒。
  - 疫苗接种提醒（基于疫苗记录中设置的下次接种时间）。
- 配置：
  - 在设置中可单独开启/关闭每类提醒。

---

## 4. 信息架构与页面结构

### 4.1 顶层导航（Tab）

1. **首页（Today）**
   - 显示当前宝宝今天的各项概览。
2. **记录（Log）**
   - 时间线形式展示当前宝宝的所有记录，支持按类型筛选。
3. **统计（Stats）**
   - 各类统计图表与数据汇总。
4. **成长（Growth）**
   - 成长记录列表与里程碑时间轴。
5. **我的 / 设置（Profile/Settings）**
   - 账号信息、多宝宝管理、通用设置、备份与导入导出。

### 4.2 全局元素

- 顶部区域（大部分页面）：
  - 左：**当前宝宝选择器** `[宝宝昵称 ⌄]`
  - 中：视页面不同显示标题/日期
  - 右：`+` 快速新增记录入口（或进入“新增记录选择器”）。
- 底部：Tab 导航。

------



## **6. 非功能性需求**



### **6.1 易用性（UX）**



- 操作路径尽量短，常用操作不超过 2~3 步。

- 重要按钮（比如“保存”、“开始/结束”）点击区域要大，适合单手操作。

- 对老人友好：

  - 大字体模式。
  - 对比度良好的配色，避免浅灰字配浅底。
  - 尽量使用简单中文表达，减少专业术语。

  

### **6.2 性能与响应**



- 在日常数据量（几千到几万条记录）下，常规列表、图表应在可接受时间内加载（如 <1s）。
- 避免一次性加载超大数据集，图表支持时间范围过滤。
- 本地数据库/缓存适当建立索引（如按 babyId + time）。



